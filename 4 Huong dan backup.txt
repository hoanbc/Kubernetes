1) Hướng dẫn backup file yaml
kubectl get all --all-namespaces -o yaml > /tmp/backupnamespaces.yaml

2) Hướng dẫn restore file yaml
kubectl apply -f /tmp/backupnamespaces.yaml

3) Hướng dẫn backup database etcd
ETCDCTL_API=3 etcdctl snapshot save --cacert=/etc/kubernetes/ssl/etcd/ca.crt --cert=/etc/kubernetes/ssl/etcd/server.crt --key=/etc/kubernetes/ssl/etcd/server.key /backup/etcd.db
ETCDCTL_API=3 etcdctl snapshot status /backup/etcd.db

4) Hướng dẫn restore database etcd
Chạy lệnh: ETCDCTL_API=3 etcdctl snapshot restore /backup/etcd.db --data-dir=/var/lib/etcdnew

Vào /etc/kubernetes/manifests/etcd.yaml và sửa các dòng sau:
từ
data-dir=/var/lib/etcd
mountPath: /var/lib/etcd
path: /var/lib/etcd

thành
data-dir=/var/lib/etcdfrombackup
mountPath: /var/lib/etcdfrombackup
path: /var/lib/etcdfrombackup

khởi động lại dịch vụ
cd /etc/kubernetes/manifests
mv etcd.yaml ..
mv ../etcd.yaml .

đợi cho dịch vụ download lại dịch vụ tại /var/lib/etcdfrombackup